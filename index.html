<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Interactive Artwork</title>

  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      background: black;
      font-family: monospace;
    }

    #stage {
      position: relative;
      width: 100%;
      min-height: 100vh;
    }

    #base {
      width: 100%;
      display: block;
      z-index: 1;
    }

    #overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 2;
      pointer-events: none;
    }

    #dialog {
      position: fixed;
      bottom: 10%;
      left: 50%;
      transform: translateX(-50%);
      width: 80%;
      max-width: 600px;
      background: #111;
      color: #fff;
      border: 4px solid #fff;
      padding: 20px;
      display: none;
      z-index: 10;
    }

    #dialog p {
      margin: 0 0 15px 0;
      font-size: 18px;
    }

    .choice {
      display: inline-block;
      margin-right: 20px;
      padding: 6px 12px;
      border: 2px solid #fff;
      cursor: pointer;
    }

    .choice:hover {
      background: #fff;
      color: #000;
    }

    /* hide youtube player */
    #player {
      position: fixed;
      width: 1px;
      height: 1px;
      opacity: 0;
      pointer-events: none;
    }
  </style>
</head>

<body>

  <div id="stage">
    <img id="base" src="images/1.jpg" alt="">
    <img id="overlay" src="" alt="">
  </div>

  <div id="dialog">
    <p>speak or not?</p>
    <span class="choice" id="speak">Speak</span>
    <span class="choice" id="watch">Watch</span>
  </div>

  <!-- YouTube audio -->
  <iframe
    id="player"
    src="https://youtu.be/Ewt8nDlL_M0?si=9-yDV4GnDgbaL_Ch"
    allow="autoplay"
  ></iframe>

  <script>
    let stage = 0;
    let index = 0;
    let speakActive = false;

    const base = document.getElementById("base");
    const overlay = document.getElementById("overlay");
    const dialog = document.getElementById("dialog");
    const player = document.getElementById("player");

    const speakSequence = [
      "images/1_1_2.png",
      "images/1_1_2_1.png",
      "images/1_1_2_2.png",
      "images/1_1_2_3.png",
      "images/1_1_2_4.png",
      "images/1_1_2_5.png"
    ];

    // First two clicks
    document.body.addEventListener("click", () => {
      if (stage === 0) {
        overlay.src = "images/1_1.png";
        stage = 1;
      }
      else if (stage === 1) {
        dialog.style.display = "block";
        stage = 2;
      }
    });

    // SPEAK
    document.getElementById("speak").addEventListener("click", (e) => {
      e.stopPropagation();
      dialog.style.display = "none";

      speakActive = true;
      index = 0;
      overlay.src = speakSequence[index];

      // start youtube audio
      player.src += "&autoplay=1";

      stage = 3;
    });

    // WATCH
    document.getElementById("watch").addEventListener("click", (e) => {
      e.stopPropagation();
      dialog.style.display = "none";

      // change base image only
      base.src = "images/2.jpg";
      overlay.src = "";
      stage = 99; // dead end for now
    });

    // Advance speak sequence
    document.body.addEventListener("click", () => {
      if (stage === 3 && speakActive && index < speakSequence.length - 1) {
        index++;
        overlay.src = speakSequence[index];
      }
    });
  </script>

</body>
</html>
